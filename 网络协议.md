# TCP/IP 协议 #

TCP/IP中文名为传输控制协议/因特网互联协议，又名网络通讯协议；TCP/IP定义了电子设备如何连入因特网，以及数据如何在它们之间传输的标准。

TCP/IP分为四个层次：链路层、 互联层、 传输层、 应用层。

PHY层芯片（LAN8720）相当于物理层，STM32F407自带的MAC层相当于数据链路层，LWIP协议栈提供的就是网络层和传输层，应用层开发者开发。

![](https://i.imgur.com/77cWwti.jpg)


SMI全称是串行管理接口(SerialManagement Interface)。是MII（介质独立口）接口中的管理接口。SMI接口包括两根信号线：MDC和MDIO，通过它MAC层芯片（或其它控制芯片）可以访问物理层(PHY)芯片的寄存器，并通过这些寄存器来对物理层(PHY)芯片进行控制和管理。

SMI接口可以控制32个PHY芯片，通过不同的PHY芯片地址来对不同的PHY操作。

MII（Media Independent Interface）介质独立接口。用于MAC层与PHY层的数据通信；RMII (Reduced Media Independent Interface) 简化媒体独立接口；根据IEEE802.3u标准；( IEEE，全称是Institute of Electrical and Electronics Engineers--国际性的电气和电子工程师协会)； MII接口包括16个数据和控制信号的引脚；RMII规范将引脚数减少到7个。

![](https://i.imgur.com/L119jzz.jpg)


# ＳＴＭ３２　运行的代码计算 #

Program Size: Code=86496 RO-data=9064 RW-data=1452 ZI-data=16116 

Code是代码占用的空间，RO-data是 Read Only 只读常量的大小，如const型，RW-data是（Read Write） 初始化了的可读写变量的大小，
ZI-data是（Zero Initialize） 没有初始化的可读写变量的大小。ZI-data不会被算做代码里因为不会被初始化。

<font color=red> 简单的说就是在烧写的时候是FLASH中的被占用的空间为：Code+RO Data+RW Data；程序运行的时候，芯片内部RAM使用的空间为： RW Data + ZI Data　</font>


# LWIP简介 #

LWIP是瑞典计算机学院（ＳＩＳＣ）开发的小型开源ＴＣＰ／ＩＰ　协议栈。　ＬＷＩＰ的协议栈只需要几十Ｋｂ的Ｒａｍ和４０ＫＢ的Ｒｏｍ就可以运行。

1. UDP 不属于连接型协议，因而消耗资源小，处理速度快； 通常在音频、视频和普通数据传输时使用UDP较多；
2. UDP的爆头使用两字节存放端口号，所以端口号的有效范围是0-65535,一般来说大于49151的是动态端口；
3. 数据报的长度是指包括报头在内的总字节数；理论上来说数据报的最大长度为65535字节；
4. UDP协议使用报头中的校验和来保证数据的安全（UDP协议可以检测是否出错）。

1. TCP是一种面向连接的、可靠的、基于IP的传输层协议；两个使用TCP的应用在彼此交换数据之前必须先建立一个TCP连接；

	![](https://i.imgur.com/p7utURh.jpg)



# WebServer 技术 #

  ![](https://i.imgur.com/rCphXak.jpg)

1.网页数组制作
  
  makefsdata文件夹下的fs文件为网页源文件（Web服务器显示的内容）； 可以通过makefsdata工具可以将我们编辑的网页文件等信息转换成.c的格式网页数组。进入makefsdata目录然后执行 makefsdata -i命令生成fsdata.c文件。

   ![](https://i.imgur.com/fMET4fY.jpg)

2.CGI技术

  CGI(Common Gatewat interface)公共网关接口是WWW技术中最重要的技术之一；是外部应用程序与Web服务器之间的接口标准，CGI允许Web服务器执行外部程序；CGI程序使网页具有交互功能，绝大多数CGI程序被用来处理来之表单的输入信息。

3.SSI技术

  SSI(Server Side Include)服务器端嵌入，是一种类似于ASP的网页制作技术，SSI指令的格式是<!__ __>, 如<!__#include file="info.html" __>表示将 info.html中的内容拷贝到当前页面中。




